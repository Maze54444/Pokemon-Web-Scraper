Ausführliche Update-Zusammenfassung für den Pokemon TCG Scraper
Basierend auf der detaillierten Analyse der mighty-cards.de Website wurden folgende Verbesserungen am Scraper vorgenommen:
1. Scraper für mighty-cards.de (scrapers/mighty_cards.py)
Die wichtigsten Änderungen:

Korrekte Ecwid-Store-ID implementiert: Verwendung der Store-ID 100312571, die aus der Website-Analyse extrahiert wurde.
Mehrere Extraktionsstrategien in einer Prioritätsreihenfolge implementiert:

Sitemap-basierte Extraktion (über die WP-Sitemap wp-sitemap-ecstore-1.xml)
Direkte Ecwid-API-Nutzung über die identifizierten API-Endpunkte
Kategorie-basierte Extraktion mit den aus der Sitemap bekannten Kategorien
Suchfunktion mit der URL-Struktur shop/search?keyword=...
Hardcoded URLs als Fallback-Lösung


Verbesserte HTML-Extraktion: Die genauen CSS-Klassen für Produkttitel (.product-details__product-title), Preis (.details-product-price__value) und den "In den Warenkorb"-Button (.form-control__button-text) werden nun gezielt angesprochen.
Korrektur von Tippfehlern: Automatische Korrektur des häufigen Tippfehlers "Togehter" zu "Together" im Produktnamen.
Robustere Produkt-ID-Generierung: Die einzigartige Produkt-ID berücksichtigt jetzt den Sprachcode (DE/EN), Produkttyp und Set-Code.
JavaScript-Extraktion: Neue Funktion zur Datenextraktion aus JavaScript-Objekten auf der Seite, um strukturierte Daten auch ohne HTML-Elemente zu finden.

2. Verfügbarkeitsprüfung (utils/availability.py)
Hinzugefügt wurde:

Dedizierte check_mighty_cards Funktion zur präzisen Erkennung des Verfügbarkeitsstatus:

Erkennung des "In den Warenkorb"-Buttons mit der Klasse .form-control__button-text
Überprüfung auf "NEW"-Badge als Verfügbarkeitsmerkmal
Auswertung von JSON-LD strukturierten Daten zur Verfügbarkeitserkennung


Optimierte Preisextraktion mit speziellen Selektoren für mighty-cards.de
Verbesserte Status-Texterkennung für zuverlässigere Benachrichtigungen

3. Matcher-Funktionen (utils/matcher.py)
Die folgenden Verbesserungen wurden implementiert:

Erweiterte Produkttyp-Erkennung: Die Funktion extract_product_type_from_text wurde verbessert, um verschiedene Produkttypen präziser zu erkennen, besonders bei Display-Produkten.
Korrektur von Tippfehlern: Automatische Erkennung und Korrektur des Tippfehlers "Togehter" im normalize_product_name.
Strengere Matching-Kriterien für Displays, um Verwechslungen mit anderen Produkttypen zu vermeiden.
Umfassendere Ausschlüsse für nicht relevante Serien/Sets, um fehlerhafte Matches zu reduzieren.

Hauptvorteile der Updates:

Höhere Zuverlässigkeit: Durch die mehrschichtigen Extraktionsstrategien kann der Scraper resilient gegen Änderungen an einer spezifischen Methode arbeiten.
Höhere Genauigkeit: Die präzise HTML-Struktur-Erkennung und verbesserte Produkttyp-Identifikation reduzieren Fehlalarme.
Bessere Fehlertoleranz: Automatische Korrektur bekannter Fehler in den Produktnamen der Website.
Optimierte Leistung: Durch die gezielten API-Aufrufe und effizientere Datenextraktion arbeitet der Scraper schneller und mit weniger Ressourcenverbrauch.

Diese Verbesserungen sollten eine erheblich zuverlässigere Erkennung und Benachrichtigung über verfügbare Pokemon-Displays auf mighty-cards.de ermöglichen.